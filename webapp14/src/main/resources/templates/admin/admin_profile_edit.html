<!DOCTYPE html>
<html lang="en">

<head>

    <title>NOIR & BLANC Admin Profile</title>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet" href="/vendor/fontawesome-free/css/all.min.css" type="text/css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i">
    <link rel="stylesheet" href="/css/sb-admin-2.min.css">
    <link rel="stylesheet" href="/css/custom.css">

</head>

{{^admin}}
{{> acces_error}}
{{/admin}}

{{#admin}}

<body class="page-top">

    <div id="wrapper">

        <!-- Sidebar -->
        {{> admin/sidebar}}

        <!-- Content wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main content -->
            <div id="content">

                <!-- Topbar -->
                {{> admin/topbar}}

                <!-- Profile information -->
                <div class="container">
                    <div class="card o-hidden border-0 shadow-lg my-5">
                        <div class="card-body p-0">
                            <div class="p-5">

                                <!-- Profile form -->
                                <form action="/admin/edit" method="post" enctype="multipart/form-data" class="user">
                                    <input type="hidden" name="_csrf" value="{{token}}" />
                                    <!-- Image -->
                                    <div class="text-center">
                                        {{#hasImage}}
                                        <img src="/admin/profile/image" class="img-profile rounded-circle mb-4"
                                            alt="Profile Picture" width="150" height="150" id="profileImage">
                                        {{/hasImage}}
                                        {{^hasImage}}
                                        <img src="/images/noAdminImage.png" class="img-profile rounded-circle mb-4"
                                            alt="Profile Picture" width="150" height="150" id="profileImage">
                                        {{/hasImage}}
                                        <br>
                                        <label for="imageUpload" class="btn btn-primary btn-user">Seleccionar
                                            Imagen</label>
                                        <input type="file" id="imageUpload" name="imageUpload"
                                            accept=".jpg, .jpeg, .png" style="display: none;">
                                        <br><br>
                                    </div>
                                    <div class="form-group row">
                                        <!-- Name -->
                                        <div class="col-sm-6 mb-3 mb-sm-0">
                                            <input type="text" class="form-control form-control-user" id="name"
                                                name="name" placeholder="Name" value="{{admin.name}}">
                                            {{#errors.name}}
                                            <span class="text-danger small">{{.}}</span>
                                            {{/errors.name}}
                                        </div>
                                        <!-- Surname -->
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control form-control-user" id="surname"
                                                name="surname" placeholder="Surname" value="{{admin.surname}}">
                                            {{#errors.surname}}
                                            <span class="text-danger small">{{.}}</span>
                                            {{/errors.surname}}
                                        </div>
                                    </div>
                                    <!-- Email -->
                                    <div class="form-group">
                                        <input type="email" class="form-control form-control-user" id="email"
                                            name="email" placeholder="Email" value="{{admin.email}}">
                                        {{#errors.email}}
                                        <p class="text-danger small">{{.}}</p>
                                        {{/errors.email}}
                                    </div>
                                    <!-- Password -->
                                    <div class="form-group row">
                                        <div class="col-sm-4 mb-3 mb-sm-0">
                                            <input type="password" class="form-control form-control-user"
                                                id="currentPassword" name="currentPassword"
                                                placeholder="Contraseña actual">
                                            {{#errors.password}}
                                            <p class="text-danger small">{{.}}</p>
                                            {{/errors.password}}
                                            {{#errors.currentPassword}}
                                            <p class="text-danger small">{{.}}</p>
                                            {{/errors.currentPassword}}
                                        </div>
                                        <div class="col-sm-4">
                                            <input type="password" class="form-control form-control-user" id="password"
                                                name="password" placeholder="Nueva contraseña">
                                            {{#errors.newPassword}}
                                            <p class="text-danger small">{{.}}</p>
                                            {{/errors.newPassword}}
                                        </div>
                                        <div class="col-sm-4">
                                            <input type="password" class="form-control form-control-user"
                                                id="confirmPassword" name="confirmPassword"
                                                placeholder="Confirmar nueva contraseña">
                                        </div>
                                    </div>
                                    <hr>
                                    <!-- Button (save) -->
                                    <input type="submit" class="btn btn-primary btn-user btn-block"
                                        value="Guardar cambios" />
                                </form>

                                <!-- Button (cancel) -->
                                <hr>
                                <div class="text-center">
                                    <a href="/admin/profile" class="text-center">Cancelar</a>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer section -->
                {{> admin/footer}}

            </div>

        </div>

        <!-- Logout modal-->
        {{> admin/logoutModal}}

        <!-- JavaScript files -->
        <script src="/vendor/jquery/jquery.min.js"></script>
        <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="/vendor/jquery-easing/jquery.easing.min.js"></script>
        <script src="/js/sb-admin-2.min.js"></script>
        <script src="/js/custom.js"></script>

</body>

<script>

    // For side menu visibility
    $(document).ready(function () {
        $('#sidebarToggleTop').click(function (e) {
            e.preventDefault();
            $('#accordionSidebar').toggleClass('toggled');
            $('#content-wrapper').toggleClass('toggled');
        });
    });

    // To handle image upload and update preview
    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('profileImage').addEventListener('click', function () {
            document.getElementById('imageUpload').click();
        });
        document.getElementById('imageUpload').addEventListener('change', function (event) {
            uploadImage(event);
        });
    });
    function uploadImage(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                document.getElementById('profileImage').src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    }

</script>

{{/admin}}

</html>