{{> partialsUser/header }}

<!-- Main Content -->
<div class="px-4" style="margin-top: 8rem;">
  <button type="button" id="backButton" class="btn btn-back" onclick="window.location.href='/index'">
    ⬅ Volver
  </button>
</div>
<main class="container d-flex justify-content-center align-items-center vh-100" style="margin-bottom: 8rem;">
  <section style="margin-top: 8rem;">
    <section id="category" class="category2 w-100" style="max-width: 500px;">
      <div class="card p-4 shadow">
        <!-- Profile form -->
        <div class="text-center">
          <h4>Editar perfil</h4>
        </div>
        <br>
        <form action="/editProfile" method="POST" class="user" enctype="multipart/form-data">
          <div class="form-group">
            <label for="exampleFirstName">Nombre:</label>
            <input type="text" class="form-control" id="exampleFirstName" name="name" value="{{user.name}}">
          </div>
          <div class="form-group">
            <label for="exampleLastName">Apellidos:</label>
            <input type="text" class="form-control" id="exampleLastName" name="surname" value="{{user.surname}}">
          </div>
          <div class="form-group">
            <label for="exampleInputEmail">Correo electrónico:</label>
            <input type="email" class="form-control" id="exampleInputEmail" name="email" value="{{user.email}}">
            {{#errorEmail}}<small class="text-danger error-message">{{errorEmail}}</small>{{/errorEmail}}
          </div>
          {{#user.addres}}
          <div class="form-group">
            <label for="exampleInputAddress">Dirección:</label>
            <input type="text" class="form-control" id="exampleInputAddress" name="address" value="{{user.address}}">
          </div>
          {{/user.addres}}
          {{^user.addres}}
          <div class="form-group">
            <label for="exampleInputAddress">Dirección:</label>
            <input type="text" class="form-control" id="exampleInputAddress" name="address" value="">
          </div>
          {{/user.addres}}
          <div class="form-group">
            <label for="exampleInputPassword">Contraseña actual:</label>
            <input type="password" class="form-control" id="exampleInputPassword" name="currentPassword">
            {{#errorCurrentPassword}}<small class="text-danger error-message">{{errorCurrentPassword}}</small>{{/errorCurrentPassword}}
          </div>
          <div class="form-group">
            <label for="newPassword">Nueva contraseña:</label>
            <input type="password" class="form-control" id="newPassword" name="newPassword">
          </div>
          <div class="form-group">
            <label for="confirmPassword">Confirmar nueva contraseña:</label>
            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword">
            {{#errorNewPassword}}<small class="text-danger error-message">{{errorNewPassword}}</small>{{/errorNewPassword}}
          </div>
          <div class="form-group">
            <label for="inputFile">Seleccionar imagen de perfil:</label>
            <input type="file" class="form-control" id="inputFile" name="newImage" accept="image/*">
            {{#errorImage}}<small class="text-danger error-message">{{errorImage}}</small>{{/errorImage}}
          </div>
          <input type="hidden" name="_csrf" value="{{token}}" />
          <br>
          <div class="d-flex justify-content-between">
            <button type="submit" class="btn btn-primary px-3">Guardar cambios</button>
            <button type="reset" class="btn btn-secondary" onclick="history.back()">Cancelar</button>
          </div>
        </form>
        <hr>
        <!-- Delete User Section -->
        <div class="text-center mt-3">
          <h5 class="text-danger">Eliminar cuenta</h5>
          <p class="text-muted">Esta acción no se puede deshacer.</p>
          <form action="/deleteUser" method="POST">
            <input type="hidden" name="_csrf" value="{{token}}" />
            <button type="submit" class="btn btn-danger">Eliminar cuenta</button>
          </form>
        </div>
      </div>
    </section>
  </section>
</main>

{{> partialsUser/footer }}
